language: python
compiler: gcc
python: "3.7"

os: linux
dist: bionic

env:
  - CODECOV=ON COMPILER=libstdc++11

cache:
  pip: true
  directories:
    - ${HOME}/.cache

before_install:
  - pip install conan gcovr
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get -q update
  - sudo apt-get -y install cmake gcc-9 g++-9
  - sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 60 --slave /usr/bin/g++ g++ /usr/bin/g++-9 --slave /usr/bin/gcov gcov /usr/bin/gcov-9

script:
  - make coverage

after_success:
  - bash <(curl -s https://codecov.io/bash)

notifications:
  email: false
